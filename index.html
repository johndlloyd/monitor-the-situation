<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MONITOR THE SITUATION // UDOT TRAFFIC CAMERAS</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- HEADER -->
  <header id="header">
    <div class="header-left">
      <span class="logo-bracket">[</span>
      <span class="logo-text">MONITOR THE SITUATION</span>
      <span class="logo-bracket">]</span>
      <span class="logo-sub">// UDOT TRAFFIC CAMERAS</span>
    </div>
    <div class="header-center">
      <span class="stat-label">FEEDS</span>
      <span class="stat-value" id="stat-total">--</span>
      <span class="stat-sep">|</span>
      <span class="stat-label">ON MAP</span>
      <span class="stat-value" id="stat-active">--</span>
    </div>
    <div class="header-right">
      <span class="clock" id="clock">--:--:--</span>
      <span class="tz">MST</span>
    </div>
  </header>

  <!-- MAIN LAYOUT -->
  <div id="main">

    <!-- LEFT PANEL: MAP + FILTERS -->
    <aside id="sidebar">
      <div id="map-container">
        <div id="map"></div>
      </div>

      <!-- QUICK REGION BUTTONS -->
      <div class="filter-section">
        <div class="panel-label" style="margin-bottom:6px">// QUICK SELECT</div>
        <div class="region-grid">
          <button class="btn-region" style="grid-column: 1 / -1" data-lat="39.5000" data-lng="-111.5000" data-zoom="7">ALL UTAH</button>
          <!-- SLC Metro -->
          <button class="btn-region" data-lat="40.7608" data-lng="-111.8910" data-zoom="11">SLC</button>
          <button class="btn-region" data-lat="40.7183" data-lng="-111.8883" data-zoom="13">SOUTH SLC</button>
          <button class="btn-region" data-lat="40.6916" data-lng="-112.0011" data-zoom="12">WEST VALLEY</button>
          <button class="btn-region" data-lat="40.6677" data-lng="-111.9388" data-zoom="13">TAYLORSVILLE</button>
          <button class="btn-region" data-lat="40.6669" data-lng="-111.8880" data-zoom="13">MURRAY</button>
          <button class="btn-region" data-lat="40.6869" data-lng="-111.8763" data-zoom="13">MILLCREEK</button>
          <button class="btn-region" data-lat="40.6586" data-lng="-111.8224" data-zoom="13">HOLLADAY</button>
          <button class="btn-region" data-lat="40.6200" data-lng="-111.8141" data-zoom="13">COTTONWOOD</button>
          <button class="btn-region" data-lat="40.6111" data-lng="-111.9002" data-zoom="13">MIDVALE</button>
          <button class="btn-region" data-lat="40.5925" data-lng="-111.8841" data-zoom="12">SANDY</button>
          <button class="btn-region" data-lat="40.5621" data-lng="-111.9290" data-zoom="12">SOUTH JORDAN</button>
          <button class="btn-region" data-lat="40.6097" data-lng="-112.0012" data-zoom="12">WEST JORDAN</button>
          <button class="btn-region" data-lat="40.5246" data-lng="-111.8638" data-zoom="12">DRAPER</button>
          <button class="btn-region" data-lat="40.5141" data-lng="-112.0327" data-zoom="12">HERRIMAN</button>
          <button class="btn-region" data-lat="40.4788" data-lng="-111.9313" data-zoom="12">BLUFFDALE</button>
          <button class="btn-region" data-lat="40.5180" data-lng="-112.0163" data-zoom="12">TOOELE</button>
          <button class="btn-region" data-lat="40.6461" data-lng="-111.4980" data-zoom="12">PARK CITY</button>
          <!-- Davis / Weber / Box Elder -->
          <button class="btn-region" data-lat="40.8794" data-lng="-111.8802" data-zoom="12">BOUNTIFUL</button>
          <button class="btn-region" data-lat="40.9799" data-lng="-111.8877" data-zoom="12">FARMINGTON</button>
          <button class="btn-region" data-lat="41.0352" data-lng="-111.9388" data-zoom="12">KAYSVILLE</button>
          <button class="btn-region" data-lat="41.0602" data-lng="-111.9791" data-zoom="12">LAYTON</button>
          <button class="btn-region" data-lat="41.1453" data-lng="-112.0261" data-zoom="12">CLEARFIELD</button>
          <button class="btn-region" data-lat="41.1616" data-lng="-112.0263" data-zoom="12">ROY</button>
          <button class="btn-region" data-lat="41.2230" data-lng="-111.9738" data-zoom="12">OGDEN</button>
          <button class="btn-region" data-lat="41.5100" data-lng="-112.0152" data-zoom="12">BRIGHAM CITY</button>
          <button class="btn-region" data-lat="41.7370" data-lng="-111.8338" data-zoom="12">LOGAN</button>
          <!-- Utah County -->
          <button class="btn-region" data-lat="40.3916" data-lng="-111.8508" data-zoom="12">LEHI</button>
          <button class="btn-region" data-lat="40.4527" data-lng="-111.7774" data-zoom="13">ALPINE</button>
          <button class="btn-region" data-lat="40.4252" data-lng="-111.7963" data-zoom="13">HIGHLAND</button>
          <button class="btn-region" data-lat="40.3786" data-lng="-111.7996" data-zoom="12">AMERICAN FORK</button>
          <button class="btn-region" data-lat="40.4130" data-lng="-111.7607" data-zoom="13">CEDAR HILLS</button>
          <button class="btn-region" data-lat="40.3641" data-lng="-111.7385" data-zoom="12">PLEASANT GROVE</button>
          <button class="btn-region" data-lat="40.2969" data-lng="-111.6946" data-zoom="12">OREM</button>
          <button class="btn-region" data-lat="40.2338" data-lng="-111.6585" data-zoom="12">PROVO</button>
          <button class="btn-region" data-lat="40.3572" data-lng="-111.7696" data-zoom="12">SPANISH FORK</button>
          <button class="btn-region" data-lat="40.1694" data-lng="-111.6088" data-zoom="12">SPRINGVILLE</button>
          <button class="btn-region" data-lat="40.0444" data-lng="-111.7327" data-zoom="12">PAYSON</button>
          <button class="btn-region" data-lat="39.7105" data-lng="-111.8327" data-zoom="12">NEPHI</button>
          <!-- Southern Utah -->
          <button class="btn-region" data-lat="37.6775" data-lng="-113.0619" data-zoom="12">CEDAR CITY</button>
          <button class="btn-region" data-lat="37.1753" data-lng="-113.2897" data-zoom="12">HURRICANE</button>
          <button class="btn-region" data-lat="37.0965" data-lng="-113.5684" data-zoom="12">ST GEORGE</button>
          <!-- Eastern / Central Utah -->
          <button class="btn-region" data-lat="39.5991" data-lng="-110.8107" data-zoom="12">PRICE</button>
          <button class="btn-region" data-lat="38.5733" data-lng="-109.5498" data-zoom="12">MOAB</button>
          <button class="btn-region" data-lat="40.4552" data-lng="-109.5287" data-zoom="12">VERNAL</button>
          <button class="btn-region" data-lat="38.7724" data-lng="-112.0852" data-zoom="12">RICHFIELD</button>
        </div>
      </div>

    </aside>

    <!-- RIGHT PANEL: CAMERA GRID -->
    <main id="grid-panel">
      <div class="panel-header">
        <div class="grid-size-controls">
          <button class="btn-ghost" id="btn-fewer" title="Fewer cameras">− FEWER</button>
          <span class="grid-info" id="grid-info">5×5</span>
          <button class="btn-ghost" id="btn-more"  title="More cameras">+ MORE</button>
        </div>
        <div class="refresh-controls">
          <label class="filter-label">REFRESH</label>
          <select class="filter-select" id="refresh-rate">
            <option value="0">MANUAL</option>
            <option value="30000">30s</option>
            <option value="60000" selected>60s</option>
            <option value="120000">2m</option>
            <option value="300000">5m</option>
          </select>
          <button class="btn-ghost" id="btn-refresh-now" title="Refresh all now">NOW</button>
        </div>
      </div>

      <div id="loading-screen">
        <div class="loading-inner">
          <div class="loading-logo">[MTS]</div>
          <div class="loading-bar-wrap"><div class="loading-bar" id="loading-bar"></div></div>
          <div class="loading-status" id="loading-status">CONNECTING TO CAMERA NETWORK...</div>
        </div>
      </div>

      <div id="camera-grid"></div>

      <div id="no-results" style="display:none">
        <span class="no-results-text">// NO FEEDS MATCH CURRENT FILTER CRITERIA</span>
      </div>
    </main>
  </div>

  <!-- POP-OUT MODAL -->
  <div id="modal-overlay" style="display:none" onclick="closeModal()">
    <div id="modal" onclick="event.stopPropagation()">
      <div id="modal-header">
        <div id="modal-title">--</div>
        <div class="modal-controls">
          <span id="modal-id" class="modal-meta"></span>
          <button class="btn-ghost" id="btn-modal-prev" title="Previous camera">◀</button>
          <button class="btn-ghost" id="btn-modal-next" title="Next camera">▶</button>
          <button class="btn-close" id="btn-modal-close" onclick="closeModal()">✕</button>
        </div>
      </div>
      <div id="modal-img-wrap">
        <img id="modal-img" src="" alt="Camera Feed">
        <div id="modal-spinner" class="spinner"></div>
        <div id="modal-timestamp"></div>
      </div>
      <div id="modal-footer">
        <span id="modal-road" class="modal-meta"></span>
        <span id="modal-coords" class="modal-meta"></span>
        <button class="btn-ghost" id="btn-modal-refresh" onclick="refreshModal()">↺ REFRESH</button>
        <button class="btn-ghost" id="btn-map-goto" onclick="gotoOnMap()">⊕ MAP</button>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="app.js"></script>
</body>
</html>
